/*! For license information please see 7123.8fa78407c42a0f990fc2.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[7123],{1468:(t,e,r)=>{r.d(e,{t:()=>a});var n=r(61589),i=r(54998),s=r(8371);class a extends n.B{constructor(){super(),this.name="start-location-view-data",this.startLocationViewMapObservable=(0,i.y)()}setStartLocations(t){this.atomic((()=>{this.clearStartLocations(),t.forEach((t=>{this.addStartLocationForView(t.sweepId,t.viewId)}))}))}isStartLocation(t){return this.getOrInitializeStartLocationViewIdsForSweep(t).length>0}isStartLocationForView(t,e){return this.getOrInitializeStartLocationViewIdsForSweep(t).includes(e)}onStartLocationSweepsChanged(t){return this.startLocationViewMapObservable.onChanged(t)}clearStartLocations(){this.startLocationViewMapObservable.clear()}addStartLocationForView(t,e){const r=this.getOrInitializeStartLocationViewIdsForSweep(t,!0);r.includes(e)||r.push(e)}getOrInitializeStartLocationViewIdsForSweep(t,e=!1){const{platformId:r}=s.Ay.parseId(t);let n=this.startLocationViewMapObservable.get(r);return void 0===n&&(n=[],e&&this.startLocationViewMapObservable.set(r,n)),n}}},24176:(t,e,r)=>{r.d(e,{F:()=>i});var n=r(14754);class i extends n.QB{constructor(t){super(),this.is360=t}}},82556:(t,e,r)=>{r.d(e,{P:()=>i});var n=r(18268);class i extends n.u{constructor(t){super(),this.payload=Object.assign({},t)}}i.id="SCREEN_TO_CANVAS_POINT"},9264:(t,e,r)=>{r.d(e,{$V:()=>l,DQ:()=>a,Dw:()=>g,X8:()=>d,Yf:()=>w,Yp:()=>u,aY:()=>f,bI:()=>y,eW:()=>c,g1:()=>m,mK:()=>h,ol:()=>o,pz:()=>p,qD:()=>i,vc:()=>s});var n=r(75673);const i=1e3/60,s=89*n.fy,a=90*n.fy,o=.001*n.fy,c=10*n.fy,u=20*n.fy,l=30*n.fy,d=.25,h=500,f=.1,p=.16,m=.08,w=Math.PI/1e3,y=.02,g=150},52288:(t,e,r)=>{r.d(e,{Sc:()=>s,l0:()=>a,zZ:()=>i});var n=r(18268);class i extends n.u{constructor(t){super(),this.payload=t}}i.id="CREATE_MESH_TRIM";class s extends n.u{constructor(t){super(),this.payload=t}}s.id="DELETE_MESH_TRIM";class a extends n.u{constructor(t){super(),this.payload=t}}a.id="MOVE_MESH_TRIM_ALL_FLOORS"},2876:(t,e,r)=>{r.d(e,{j:()=>i});var n=r(18268);class i extends n.u{constructor(t){super(),this.payload=Object.assign({},t)}}i.id="SET_DEFAULT_VIEW"},52489:(t,e,r)=>{r.d(e,{e:()=>u});var n=r(68909),i=r(61693),s=r(35535),a=r(34944),o=r(60282);const c=new n.Vector3;class u extends i.v{constructor(t,e,r,i,s,a,c=new Date,u=new Date,l,d,h,f){super(),this.position=t,this.scale=e,this.rotation=r,this.enabled=s,this.meshGroup=a,this.created=c,this.modified=u,this.discardContents=!0,this.activeInPanoMode=!0,this._rotationMatrix=new n.Matrix4,this._matrix=new n.Matrix4,this.id=l||`${this.meshGroup}`+(0,o.D)(11),this.index=i,this.name=d,this.discardContents=void 0===h||h,this.activeInPanoMode=void 0===f||f}get sid(){return this.id}isPointTrimmed(t,e){return!!this.enabled&&(!(e&&!this.activeInPanoMode)&&(this.discardContents?this.isPointInside(t):!this.isPointInside(t)))}getTransformationMatrix(t){return(t=t||new n.Matrix4).compose(this.position,this.rotation,this.scale),t}getInverseTransformationMatrix(t){return(t=this.getTransformationMatrix(t)).invert(),t}isPointInside(t){this.getInverseTransformationMatrix(this._matrix);const e=c.copy(t).applyMatrix4(this._matrix);return e.x<.5&&e.x>-.5&&e.y<.5&&e.y>-.5&&e.z<.5&&e.z>-.5}updateRotationMatrix(){const t=this.rotation,e=this.rotation.clone().set(t.x,t.y,t.z,-t.w);this._rotationMatrix.makeRotationFromQuaternion(e.normalize())}get rotationMatrix(){return this.updateRotationMatrix(),this._rotationMatrix}static getUnitAABB(){return new n.Box3(new n.Vector3(-.5,-.5,-.5),new n.Vector3(.5,.5,.5))}getContainingAABB(){const t=u.getUnitAABB(),e=(0,a.jF)(t),r=this.getTransformationMatrix();return(0,a.nD)(e,t,r)}getOBB(){const t=(new n.Matrix4).makeRotationFromQuaternion(this.rotation),e=(new n.Matrix3).setFromMatrix4(t);return new s.OBB(this.position,this.scale.clone().multiplyScalar(.5),e)}}},3654:(t,e,r)=>{r.d(e,{I:()=>n});const n="perm.spaces.workshop.edit"},70401:(t,e,r)=>{r.d(e,{W:()=>i});var n=r(14754);class i extends n.QB{constructor(t){super(),this.snapshot=t}}},21893:(t,e,r)=>{r.d(e,{Y:()=>s});var n=r(53865),i=r(27147);class s{constructor(){this.handlers=[{msgType:n.xi,func:(t,e)=>{const{dataTypes:r,error:n}=e,s=n.name||"SaveError",a={error_code:(0,i.fS)(n).join(", "),error_type:s,error_dialog:"banner",data_type:r?r.join(", "):"",exception:{message:`${s}: ${n.message}`,stack:n.stack},mock_error:(0,i.zi)(n)};t.track("error_displayed",a)}},{msgType:n.ft,func:(t,e)=>{const{dataTypes:r,error:n}=e,s=n.name||"PublishError",a={error_code:(0,i.fS)(n).join(", "),error_type:s,error_dialog:"banner",data_type:r?r.join(", "):"",exception:{message:`${s}: ${n.message}`,stack:n.stack},mock_error:(0,i.zi)(n)};t.track("error_displayed",a)}}]}}},1063:(t,e,r)=>{var n=r(96540);var i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=n.useState,a=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!i(t,r)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),n=s({inst:{value:r,getSnapshot:e}}),i=n[0].inst,l=n[1];return o((function(){i.value=r,i.getSnapshot=e,u(i)&&l({inst:i})}),[t,r,e]),a((function(){return u(i)&&l({inst:i}),t((function(){u(i)&&l({inst:i})}))}),[t]),c(r),r};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},19888:(t,e,r)=>{t.exports=r(1063)},8660:(t,e,r)=>{r.d(e,{BE:()=>Z,Ay:()=>tt});var n=r(96540),i=r(19888);const s=()=>{},a=s(),o=Object,c=t=>t===a,u=t=>"function"==typeof t,l=(t,e)=>({...t,...e}),d=new WeakMap;let h=0;const f=t=>{const e=typeof t,r=t&&t.constructor,n=r==Date;let i,s;if(o(t)!==t||n||r==RegExp)i=n?t.toJSON():"symbol"==e?t.toString():"string"==e?JSON.stringify(t):""+t;else{if(i=d.get(t),i)return i;if(i=++h+"~",d.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=f(t[s])+",";d.set(t,i)}if(r==o){i="#";const e=o.keys(t).sort();for(;!c(s=e.pop());)c(t[s])||(i+=s+":"+f(t[s])+",");d.set(t,i)}}return i},p=new WeakMap,m={},w={},y="undefined",g=typeof window!=y,S=typeof document!=y,v=(t,e)=>{const r=p.get(t);return[()=>!c(e)&&t.get(e)||m,n=>{if(!c(e)){const i=t.get(e);e in w||(w[e]=i),r[5](e,l(i,n),i||m)}},r[6],()=>!c(e)&&e in w?w[e]:!c(e)&&t.get(e)||m]};let b=!0;const[x,M]=g&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[s,s],_={isOnline:()=>b,isVisible:()=>{const t=S&&document.visibilityState;return c(t)||"hidden"!==t}},V={initFocus:t=>(S&&document.addEventListener("visibilitychange",t),x("focus",t),()=>{S&&document.removeEventListener("visibilitychange",t),M("focus",t)}),initReconnect:t=>{const e=()=>{b=!0,t()},r=()=>{b=!1};return x("online",e),x("offline",r),()=>{M("online",e),M("offline",r)}}},E=!n.useId,O=!g||"Deno"in window,z=t=>g&&typeof window.requestAnimationFrame!=y?window.requestAnimationFrame(t):setTimeout(t,1),L=O?n.useEffect:n.useLayoutEffect,I="undefined"!=typeof navigator&&navigator.connection,R=!O&&I&&(["slow-2g","2g"].includes(I.effectiveType)||I.saveData),T=t=>{if(u(t))try{t=t()}catch(e){t=""}const e=t;return[t="string"==typeof t?t:(Array.isArray(t)?t.length:t)?f(t):"",e]};let k=0;const B=()=>++k;var P=3,C=0,F=2,D=1;async function A(...t){const[e,r,n,i]=t,s=l({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{});let o=s.populateCache;const d=s.rollbackOnError;let h=s.optimisticData;const f=!1!==s.revalidate,m=s.throwOnError;if(u(r)){const t=r,n=[],i=e.keys();for(const r of i)!/^\$(inf|sub)\$/.test(r)&&t(e.get(r)._k)&&n.push(r);return Promise.all(n.map(w))}return w(r);async function w(r){const[i]=T(r);if(!i)return;const[s,l]=v(e,i),[w,y,g,S]=p.get(e),b=()=>{const t=w[i];return f&&(delete g[i],delete S[i],t&&t[0])?t[0](2).then((()=>s().data)):s().data};if(t.length<3)return b();let x,M=n;const _=B();y[i]=[_,0];const V=!c(h),E=s(),O=E.data,z=E._c,L=c(z)?O:z;if(V&&(h=u(h)?h(L,O):h,l({data:h,_c:L})),u(M))try{M=M(L)}catch(t){x=t}if(M&&u(M.then)){if(M=await M.catch((t=>{x=t})),_!==y[i][0]){if(x)throw x;return M}x&&V&&(t=>"function"==typeof d?d(t):!1!==d)(x)&&(o=!0,l({data:L,_c:a}))}if(o&&!x)if(u(o)){const t=o(M,L);l({data:t,error:a,_c:a})}else l({data:M,error:a,_c:a});if(y[i][1]=B(),Promise.resolve(b()).then((()=>{l({_c:a})})),!x)return M;if(m)throw x}}const j=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},W=(t,e)=>{if(!p.has(t)){const r=l(V,e),n={},i=A.bind(a,t);let o=s;const c={},u=(t,e)=>{const r=c[t]||[];return c[t]=r,r.push(e),()=>r.splice(r.indexOf(e),1)},d=(e,r,n)=>{t.set(e,r);const i=c[e];if(i)for(const t of i)t(r,n)},h=()=>{if(!p.has(t)&&(p.set(t,[n,{},{},{},i,d,u]),!O)){const e=r.initFocus(setTimeout.bind(a,j.bind(a,n,0))),i=r.initReconnect(setTimeout.bind(a,j.bind(a,n,1)));o=()=>{e&&e(),i&&i(),p.delete(t)}}};return h(),[t,i,h,o]}return[t,p.get(t)[4]]},[$,q]=W(new Map),U=l({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:(t,e,r,n,i)=>{const s=r.errorRetryCount,a=i.retryCount,o=~~((Math.random()+.5)*(1<<(a<8?a:8)))*r.errorRetryInterval;!c(s)&&a>s||setTimeout(n,o,i)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:R?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:R?5e3:3e3,compare:(t,e)=>f(t)==f(e),isPaused:()=>!1,cache:$,mutate:q,fallback:{}},_),N=(t,e)=>{const r=l(t,e);if(e){const{use:n,fallback:i}=t,{use:s,fallback:a}=e;n&&s&&(r.use=n.concat(s)),i&&a&&(r.fallback=l(i,a))}return r},Q=(0,n.createContext)({}),H=g&&window.__SWR_DEVTOOLS_USE__,Y=H?window.__SWR_DEVTOOLS_USE__:[],G=t=>u(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(null===t[1]?t[2]:t[1])||{}],J=Y.concat((t=>(e,r,n)=>t(e,r&&((...t)=>{const[n]=T(e),[,,,i]=p.get($);if(n.startsWith("$inf$"))return r(...t);const s=i[n];return c(s)?r(...t):(delete i[n],s)}),n)));H&&(window.__SWR_DEVTOOLS_REACT__=n);const K=n.use||(t=>{if("pending"===t.status)throw t;if("fulfilled"===t.status)return t.value;throw"rejected"===t.status?t.reason:(t.status="pending",t.then((e=>{t.status="fulfilled",t.value=e}),(e=>{t.status="rejected",t.reason=e})),t)}),X={dedupe:!0},Z=o.defineProperty((t=>{const{value:e}=t,r=(0,n.useContext)(Q),i=u(e),s=(0,n.useMemo)((()=>i?e(r):e),[i,r,e]),o=(0,n.useMemo)((()=>i?s:N(r,s)),[i,r,s]),c=s&&s.provider,d=(0,n.useRef)(a);c&&!d.current&&(d.current=W(c(o.cache||$),s));const h=d.current;return h&&(o.cache=h[0],o.mutate=h[1]),L((()=>{if(h)return h[2]&&h[2](),h[3]}),[]),(0,n.createElement)(Q.Provider,l(t,{value:o}))}),"defaultValue",{value:U}),tt=(et=(t,e,r)=>{const{cache:s,compare:o,suspense:d,fallbackData:h,revalidateOnMount:f,revalidateIfStale:m,refreshInterval:w,refreshWhenHidden:y,refreshWhenOffline:g,keepPreviousData:S}=r,[b,x,M,_]=p.get(s),[V,I]=T(t),R=(0,n.useRef)(!1),k=(0,n.useRef)(!1),j=(0,n.useRef)(V),W=(0,n.useRef)(e),$=(0,n.useRef)(r),q=()=>$.current,U=()=>q().isVisible()&&q().isOnline(),[N,Q,H,Y]=v(s,V),G=(0,n.useRef)({}).current,J=c(h)?r.fallback[V]:h,Z=(t,e)=>{for(const r in G){const n=r;if("data"===n){if(!o(t[n],e[n])){if(!c(t[n]))return!1;if(!o(ct,e[n]))return!1}}else if(e[n]!==t[n])return!1}return!0},tt=(0,n.useMemo)((()=>{const t=!!V&&!!e&&(c(f)?!q().isPaused()&&!d&&(!!c(m)||m):f),r=e=>{const r=l(e);return delete r._k,t?{isValidating:!0,isLoading:!0,...r}:r},n=N(),i=Y(),s=r(n),a=n===i?s:r(i);let o=s;return[()=>{const t=r(N());return Z(t,o)?(o.data=t.data,o.isLoading=t.isLoading,o.isValidating=t.isValidating,o.error=t.error,o):(o=t,t)},()=>a]}),[s,V]),et=(0,i.useSyncExternalStore)((0,n.useCallback)((t=>H(V,((e,r)=>{Z(r,e)||t()}))),[s,V]),tt[0],tt[1]),rt=!R.current,nt=b[V]&&b[V].length>0,it=et.data,st=c(it)?J:it,at=et.error,ot=(0,n.useRef)(st),ct=S?c(it)?ot.current:it:st,ut=!(nt&&!c(at))&&(rt&&!c(f)?f:!q().isPaused()&&(d?!c(st)&&m:c(st)||m)),lt=!!(V&&e&&rt&&ut),dt=c(et.isValidating)?lt:et.isValidating,ht=c(et.isLoading)?lt:et.isLoading,ft=(0,n.useCallback)((async t=>{const e=W.current;if(!V||!e||k.current||q().isPaused())return!1;let n,i,s=!0;const l=t||{},d=!M[V]||!l.dedupe,h=()=>E?!k.current&&V===j.current&&R.current:V===j.current,f={isValidating:!1,isLoading:!1},p=()=>{Q(f)},m=()=>{const t=M[V];t&&t[1]===i&&delete M[V]},w={isValidating:!0};c(N().data)&&(w.isLoading=!0);try{if(d&&(Q(w),r.loadingTimeout&&c(N().data)&&setTimeout((()=>{s&&h()&&q().onLoadingSlow(V,r)}),r.loadingTimeout),M[V]=[e(I),B()]),[n,i]=M[V],n=await n,d&&setTimeout(m,r.dedupingInterval),!M[V]||M[V][1]!==i)return d&&h()&&q().onDiscarded(V),!1;f.error=a;const t=x[V];if(!c(t)&&(i<=t[0]||i<=t[1]||0===t[1]))return p(),d&&h()&&q().onDiscarded(V),!1;const u=N().data;f.data=o(u,n)?u:n,d&&h()&&q().onSuccess(n,V,r)}catch(t){m();const e=q(),{shouldRetryOnError:r}=e;e.isPaused()||(f.error=t,d&&h()&&(e.onError(t,V,e),(!0===r||u(r)&&r(t))&&U()&&e.onErrorRetry(t,V,e,(t=>{const e=b[V];e&&e[0]&&e[0](P,t)}),{retryCount:(l.retryCount||0)+1,dedupe:!0})))}return s=!1,p(),!0}),[V,s]),pt=(0,n.useCallback)(((...t)=>A(s,j.current,...t)),[]);if(L((()=>{W.current=e,$.current=r,c(it)||(ot.current=it)})),L((()=>{if(!V)return;const t=ft.bind(a,X);let e=0;const r=((t,e,r)=>{const n=e[t]||(e[t]=[]);return n.push(r),()=>{const t=n.indexOf(r);t>=0&&(n[t]=n[n.length-1],n.pop())}})(V,b,((r,n={})=>{if(r==C){const r=Date.now();q().revalidateOnFocus&&r>e&&U()&&(e=r+q().focusThrottleInterval,t())}else if(r==D)q().revalidateOnReconnect&&U()&&t();else{if(r==F)return ft();if(r==P)return ft(n)}}));return k.current=!1,j.current=V,R.current=!0,Q({_k:I}),ut&&(c(st)||O?t():z(t)),()=>{k.current=!0,r()}}),[V]),L((()=>{let t;function e(){const e=u(w)?w(N().data):w;e&&-1!==t&&(t=setTimeout(r,e))}function r(){N().error||!y&&!q().isVisible()||!g&&!q().isOnline()?e():ft(X).then(e)}return e(),()=>{t&&(clearTimeout(t),t=-1)}}),[w,y,g,V]),(0,n.useDebugValue)(ct),d&&c(st)&&V){if(!E&&O)throw new Error("Fallback data is required when using suspense in SSR.");W.current=e,$.current=r,k.current=!1;const t=_[V];if(!c(t)){const e=pt(t);K(e)}if(!c(at))throw at;{const t=ft(X);c(ct)||(t.status="fulfilled",t.value=!0),K(t)}}return{mutate:pt,get data(){return G.data=!0,ct},get error(){return G.error=!0,at},get isValidating(){return G.isValidating=!0,dt},get isLoading(){return G.isLoading=!0,ht}}},function(...t){const e=l(U,(0,n.useContext)(Q)),[r,i,s]=G(t),a=N(e,s);let o=et;const{use:c}=a,u=(c||[]).concat(J);for(let t=u.length;t--;)o=u[t](o);return o(r,i||a.fetcher||null,a)});var et},35535:(t,e,r)=>{r.r(e),r.d(e,{OBB:()=>v});var n=r(68909);const i={c:null,u:[new n.Vector3,new n.Vector3,new n.Vector3],e:[]},s={c:null,u:[new n.Vector3,new n.Vector3,new n.Vector3],e:[]},a=[[],[],[]],o=[[],[],[]],c=[],u=new n.Vector3,l=new n.Vector3,d=new n.Vector3,h=new n.Vector3,f=new n.Vector3,p=new n.Vector3,m=new n.Matrix3,w=new n.Box3,y=new n.Matrix4,g=new n.Matrix4,S=new n.Ray;class v{constructor(t=new n.Vector3,e=new n.Vector3,r=new n.Matrix3){this.center=t,this.halfSize=e,this.rotation=r}set(t,e,r){return this.center=t,this.halfSize=e,this.rotation=r,this}copy(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this}clone(){return(new this.constructor).copy(this)}getSize(t){return t.copy(this.halfSize).multiplyScalar(2)}clampPoint(t,e){const r=this.halfSize;h.subVectors(t,this.center),this.rotation.extractBasis(u,l,d),e.copy(this.center);const i=n.MathUtils.clamp(h.dot(u),-r.x,r.x);e.add(u.multiplyScalar(i));const s=n.MathUtils.clamp(h.dot(l),-r.y,r.y);e.add(l.multiplyScalar(s));const a=n.MathUtils.clamp(h.dot(d),-r.z,r.z);return e.add(d.multiplyScalar(a)),e}containsPoint(t){return h.subVectors(t,this.center),this.rotation.extractBasis(u,l,d),Math.abs(h.dot(u))<=this.halfSize.x&&Math.abs(h.dot(l))<=this.halfSize.y&&Math.abs(h.dot(d))<=this.halfSize.z}intersectsBox3(t){return this.intersectsOBB(b.fromBox3(t))}intersectsSphere(t){return this.clampPoint(t.center,p),p.distanceToSquared(t.center)<=t.radius*t.radius}intersectsOBB(t,e=Number.EPSILON){i.c=this.center,i.e[0]=this.halfSize.x,i.e[1]=this.halfSize.y,i.e[2]=this.halfSize.z,this.rotation.extractBasis(i.u[0],i.u[1],i.u[2]),s.c=t.center,s.e[0]=t.halfSize.x,s.e[1]=t.halfSize.y,s.e[2]=t.halfSize.z,t.rotation.extractBasis(s.u[0],s.u[1],s.u[2]);for(let t=0;t<3;t++)for(let e=0;e<3;e++)a[t][e]=i.u[t].dot(s.u[e]);h.subVectors(s.c,i.c),c[0]=h.dot(i.u[0]),c[1]=h.dot(i.u[1]),c[2]=h.dot(i.u[2]);for(let t=0;t<3;t++)for(let r=0;r<3;r++)o[t][r]=Math.abs(a[t][r])+e;let r,n;for(let t=0;t<3;t++)if(r=i.e[t],n=s.e[0]*o[t][0]+s.e[1]*o[t][1]+s.e[2]*o[t][2],Math.abs(c[t])>r+n)return!1;for(let t=0;t<3;t++)if(r=i.e[0]*o[0][t]+i.e[1]*o[1][t]+i.e[2]*o[2][t],n=s.e[t],Math.abs(c[0]*a[0][t]+c[1]*a[1][t]+c[2]*a[2][t])>r+n)return!1;return r=i.e[1]*o[2][0]+i.e[2]*o[1][0],n=s.e[1]*o[0][2]+s.e[2]*o[0][1],!(Math.abs(c[2]*a[1][0]-c[1]*a[2][0])>r+n)&&(r=i.e[1]*o[2][1]+i.e[2]*o[1][1],n=s.e[0]*o[0][2]+s.e[2]*o[0][0],!(Math.abs(c[2]*a[1][1]-c[1]*a[2][1])>r+n)&&(r=i.e[1]*o[2][2]+i.e[2]*o[1][2],n=s.e[0]*o[0][1]+s.e[1]*o[0][0],!(Math.abs(c[2]*a[1][2]-c[1]*a[2][2])>r+n)&&(r=i.e[0]*o[2][0]+i.e[2]*o[0][0],n=s.e[1]*o[1][2]+s.e[2]*o[1][1],!(Math.abs(c[0]*a[2][0]-c[2]*a[0][0])>r+n)&&(r=i.e[0]*o[2][1]+i.e[2]*o[0][1],n=s.e[0]*o[1][2]+s.e[2]*o[1][0],!(Math.abs(c[0]*a[2][1]-c[2]*a[0][1])>r+n)&&(r=i.e[0]*o[2][2]+i.e[2]*o[0][2],n=s.e[0]*o[1][1]+s.e[1]*o[1][0],!(Math.abs(c[0]*a[2][2]-c[2]*a[0][2])>r+n)&&(r=i.e[0]*o[1][0]+i.e[1]*o[0][0],n=s.e[1]*o[2][2]+s.e[2]*o[2][1],!(Math.abs(c[1]*a[0][0]-c[0]*a[1][0])>r+n)&&(r=i.e[0]*o[1][1]+i.e[1]*o[0][1],n=s.e[0]*o[2][2]+s.e[2]*o[2][0],!(Math.abs(c[1]*a[0][1]-c[0]*a[1][1])>r+n)&&(r=i.e[0]*o[1][2]+i.e[1]*o[0][2],n=s.e[0]*o[2][1]+s.e[1]*o[2][0],!(Math.abs(c[1]*a[0][2]-c[0]*a[1][2])>r+n)))))))))}intersectsPlane(t){this.rotation.extractBasis(u,l,d);const e=this.halfSize.x*Math.abs(t.normal.dot(u))+this.halfSize.y*Math.abs(t.normal.dot(l))+this.halfSize.z*Math.abs(t.normal.dot(d)),r=t.normal.dot(this.center)-t.constant;return Math.abs(r)<=e}intersectRay(t,e){return this.getSize(f),w.setFromCenterAndSize(h.set(0,0,0),f),y.setFromMatrix3(this.rotation),y.setPosition(this.center),g.copy(y).invert(),S.copy(t).applyMatrix4(g),S.intersectBox(w,e)?e.applyMatrix4(y):null}intersectsRay(t){return null!==this.intersectRay(t,h)}fromBox3(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)}applyMatrix4(t){const e=t.elements;let r=h.set(e[0],e[1],e[2]).length();const n=h.set(e[4],e[5],e[6]).length(),i=h.set(e[8],e[9],e[10]).length();t.determinant()<0&&(r=-r),m.setFromMatrix4(t);const s=1/r,a=1/n,o=1/i;return m.elements[0]*=s,m.elements[1]*=s,m.elements[2]*=s,m.elements[3]*=a,m.elements[4]*=a,m.elements[5]*=a,m.elements[6]*=o,m.elements[7]*=o,m.elements[8]*=o,this.rotation.multiply(m),this.halfSize.x*=r,this.halfSize.y*=n,this.halfSize.z*=i,h.setFromMatrixPosition(t),this.center.add(h),this}}const b=new v}}]);